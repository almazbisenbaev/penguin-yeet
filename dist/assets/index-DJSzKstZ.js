(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const p of g)if(p.type==="childList")for(const d of p.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&h(d)}).observe(document,{childList:!0,subtree:!0});function l(g){const p={};return g.integrity&&(p.integrity=g.integrity),g.referrerPolicy&&(p.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?p.credentials="include":g.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function h(g){if(g.ep)return;g.ep=!0;const p=l(g);fetch(g.href,p)}})();const F=1200,fn=800,pn=.12,xn=.85,hn=.6,dn=.5,H=15,j=100,$=60,nn=30,mn=.02,Q=-Math.PI/2,k=0,tn=200,en=30,vn=2,q=10,An=100,rn=[30,60,90],on=40,an=300,cn=1200,sn=1e3,Sn=5,ln=.35,wn=.992,yn=2.5,Nn=.2,J=8,Rn=60,In=65,En=1.5,Dn=150,Mn=180,_n=220,n={canvas:null,ctx:null,viewportWidth:0,viewportHeight:0,dpr:1,uiScale:1,metrics:{penguinRadius:H,cannonX:j,cannonWidth:$,cannonHeight:nn,powerBarWidth:tn,powerBarHeight:en,springHeight:on,springWidths:[...rn]},gameState:"start",penguin:{x:j,y:400-H,vx:0,vy:0,mass:1,isDiving:!1},springs:[],cameraX:0,lastSpringX:0,maxDistance:0,GROUND_Y:400,canJumpFromRoll:!0,cannonAngle:-Math.PI/4,cannonRotationDirection:1,powerValue:50,powerDirection:1,CANNON_Y:400,rng:Math.random,hasShot:!1,boomUntil:0,tuning:{GRAVITY:pn,BOUNCE_DAMPING:hn,MIN_ENERGY_THRESHOLD:dn,ROLLING_FRICTION:wn,ROLLING_SPEED_MULTIPLIER:yn,ROLLING_THRESHOLD:Nn,SPRING_BOOST:Sn,MIN_SPRING_DISTANCE:an,MAX_SPRING_DISTANCE:cn,SPRING_SPAWN_DISTANCE:sn}};var C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function On(e){if(e.__esModule)return e;var u=e.default;if(typeof u=="function"){var l=function h(){return this instanceof h?Reflect.construct(u,arguments,this.constructor):u.apply(this,arguments)};l.prototype=u.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(e).forEach(function(h){var g=Object.getOwnPropertyDescriptor(e,h);Object.defineProperty(l,h,g.get?g:{enumerable:!0,get:function(){return e[h]}})}),l}var P={exports:{}};P.exports;(function(e){(function(u,l,h){function g(t){var o=this,a=s();o.next=function(){var i=2091639*o.s0+o.c*23283064365386963e-26;return o.s0=o.s1,o.s1=o.s2,o.s2=i-(o.c=i|0)},o.c=1,o.s0=a(" "),o.s1=a(" "),o.s2=a(" "),o.s0-=a(t),o.s0<0&&(o.s0+=1),o.s1-=a(t),o.s1<0&&(o.s1+=1),o.s2-=a(t),o.s2<0&&(o.s2+=1),a=null}function p(t,o){return o.c=t.c,o.s0=t.s0,o.s1=t.s1,o.s2=t.s2,o}function d(t,o){var a=new g(t),i=o&&o.state,r=a.next;return r.int32=function(){return a.next()*4294967296|0},r.double=function(){return r()+(r()*2097152|0)*11102230246251565e-32},r.quick=r,i&&(typeof i=="object"&&p(i,a),r.state=function(){return p(a,{})}),r}function s(){var t=4022871197,o=function(a){a=String(a);for(var i=0;i<a.length;i++){t+=a.charCodeAt(i);var r=.02519603282416938*t;t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=r*4294967296}return(t>>>0)*23283064365386963e-26};return o}l&&l.exports?l.exports=d:this.alea=d})(C,e)})(P);var Gn=P.exports,W={exports:{}};W.exports;(function(e){(function(u,l,h){function g(s){var t=this,o="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var i=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^i^i>>>8},s===(s|0)?t.x=s:o+=s;for(var a=0;a<o.length+64;a++)t.x^=o.charCodeAt(a)|0,t.next()}function p(s,t){return t.x=s.x,t.y=s.y,t.z=s.z,t.w=s.w,t}function d(s,t){var o=new g(s),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do var r=o.next()>>>11,c=(o.next()>>>0)/4294967296,f=(r+c)/(1<<21);while(f===0);return f},i.int32=o.next,i.quick=i,a&&(typeof a=="object"&&p(a,o),i.state=function(){return p(o,{})}),i}l&&l.exports?l.exports=d:this.xor128=d})(C,e)})(W);var Cn=W.exports,B={exports:{}};B.exports;(function(e){(function(u,l,h){function g(s){var t=this,o="";t.next=function(){var i=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(i^i<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,s===(s|0)?t.x=s:o+=s;for(var a=0;a<o.length+64;a++)t.x^=o.charCodeAt(a)|0,a==o.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function p(s,t){return t.x=s.x,t.y=s.y,t.z=s.z,t.w=s.w,t.v=s.v,t.d=s.d,t}function d(s,t){var o=new g(s),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do var r=o.next()>>>11,c=(o.next()>>>0)/4294967296,f=(r+c)/(1<<21);while(f===0);return f},i.int32=o.next,i.quick=i,a&&(typeof a=="object"&&p(a,o),i.state=function(){return p(o,{})}),i}l&&l.exports?l.exports=d:this.xorwow=d})(C,e)})(B);var Tn=B.exports,Y={exports:{}};Y.exports;(function(e){(function(u,l,h){function g(s){var t=this;t.next=function(){var a=t.x,i=t.i,r,c;return r=a[i],r^=r>>>7,c=r^r<<24,r=a[i+1&7],c^=r^r>>>10,r=a[i+3&7],c^=r^r>>>3,r=a[i+4&7],c^=r^r<<7,r=a[i+7&7],r=r^r<<13,c^=r^r<<9,a[i]=c,t.i=i+1&7,c};function o(a,i){var r,c=[];if(i===(i|0))c[0]=i;else for(i=""+i,r=0;r<i.length;++r)c[r&7]=c[r&7]<<15^i.charCodeAt(r)+c[r+1&7]<<13;for(;c.length<8;)c.push(0);for(r=0;r<8&&c[r]===0;++r);for(r==8?c[7]=-1:c[r],a.x=c,a.i=0,r=256;r>0;--r)a.next()}o(t,s)}function p(s,t){return t.x=s.x.slice(),t.i=s.i,t}function d(s,t){s==null&&(s=+new Date);var o=new g(s),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do var r=o.next()>>>11,c=(o.next()>>>0)/4294967296,f=(r+c)/(1<<21);while(f===0);return f},i.int32=o.next,i.quick=i,a&&(a.x&&p(a,o),i.state=function(){return p(o,{})}),i}l&&l.exports?l.exports=d:this.xorshift7=d})(C,e)})(Y);var bn=Y.exports,U={exports:{}};U.exports;(function(e){(function(u,l,h){function g(s){var t=this;t.next=function(){var a=t.w,i=t.X,r=t.i,c,f;return t.w=a=a+1640531527|0,f=i[r+34&127],c=i[r=r+1&127],f^=f<<13,c^=c<<17,f^=f>>>15,c^=c>>>12,f=i[r]=f^c,t.i=r,f+(a^a>>>16)|0};function o(a,i){var r,c,f,v,N,I=[],R=128;for(i===(i|0)?(c=i,i=null):(i=i+"\0",c=0,R=Math.max(R,i.length)),f=0,v=-32;v<R;++v)i&&(c^=i.charCodeAt((v+32)%i.length)),v===0&&(N=c),c^=c<<10,c^=c>>>15,c^=c<<4,c^=c>>>13,v>=0&&(N=N+1640531527|0,r=I[v&127]^=c+N,f=r==0?f+1:0);for(f>=128&&(I[(i&&i.length||0)&127]=-1),f=127,v=4*128;v>0;--v)c=I[f+34&127],r=I[f=f+1&127],c^=c<<13,r^=r<<17,c^=c>>>15,r^=r>>>12,I[f]=c^r;a.w=N,a.X=I,a.i=f}o(t,s)}function p(s,t){return t.i=s.i,t.w=s.w,t.X=s.X.slice(),t}function d(s,t){s==null&&(s=+new Date);var o=new g(s),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do var r=o.next()>>>11,c=(o.next()>>>0)/4294967296,f=(r+c)/(1<<21);while(f===0);return f},i.int32=o.next,i.quick=i,a&&(a.X&&p(a,o),i.state=function(){return p(o,{})}),i}l&&l.exports?l.exports=d:this.xor4096=d})(C,e)})(U);var Ln=U.exports,V={exports:{}};V.exports;(function(e){(function(u,l,h){function g(s){var t=this,o="";t.next=function(){var i=t.b,r=t.c,c=t.d,f=t.a;return i=i<<25^i>>>7^r,r=r-c|0,c=c<<24^c>>>8^f,f=f-i|0,t.b=i=i<<20^i>>>12^r,t.c=r=r-c|0,t.d=c<<16^r>>>16^f,t.a=f-i|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,s===Math.floor(s)?(t.a=s/4294967296|0,t.b=s|0):o+=s;for(var a=0;a<o.length+20;a++)t.b^=o.charCodeAt(a)|0,t.next()}function p(s,t){return t.a=s.a,t.b=s.b,t.c=s.c,t.d=s.d,t}function d(s,t){var o=new g(s),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do var r=o.next()>>>11,c=(o.next()>>>0)/4294967296,f=(r+c)/(1<<21);while(f===0);return f},i.int32=o.next,i.quick=i,a&&(typeof a=="object"&&p(a,o),i.state=function(){return p(o,{})}),i}l&&l.exports?l.exports=d:this.tychei=d})(C,e)})(V);var Hn=V.exports,un={exports:{}};const Xn={},Pn=Object.freeze(Object.defineProperty({__proto__:null,default:Xn},Symbol.toStringTag,{value:"Module"})),Wn=On(Pn);(function(e){(function(u,l,h){var g=256,p=6,d=52,s="random",t=h.pow(g,p),o=h.pow(2,d),a=o*2,i=g-1,r;function c(x,m,w){var A=[];m=m==!0?{entropy:!0}:m||{};var S=I(N(m.entropy?[x,D(l)]:x??R(),3),A),E=new f(A),M=function(){for(var y=E.g(p),_=t,O=0;y<o;)y=(y+O)*g,_*=g,O=E.g(1);for(;y>=a;)y/=2,_/=2,O>>>=1;return(y+O)/_};return M.int32=function(){return E.g(4)|0},M.quick=function(){return E.g(4)/4294967296},M.double=M,I(D(E.S),l),(m.pass||w||function(y,_,O,G){return G&&(G.S&&v(G,E),y.state=function(){return v(E,{})}),O?(h[s]=y,_):y})(M,S,"global"in m?m.global:this==h,m.state)}function f(x){var m,w=x.length,A=this,S=0,E=A.i=A.j=0,M=A.S=[];for(w||(x=[w++]);S<g;)M[S]=S++;for(S=0;S<g;S++)M[S]=M[E=i&E+x[S%w]+(m=M[S])],M[E]=m;(A.g=function(y){for(var _,O=0,G=A.i,L=A.j,b=A.S;y--;)_=b[G=i&G+1],O=O*g+b[i&(b[G]=b[L=i&L+_])+(b[L]=_)];return A.i=G,A.j=L,O})(g)}function v(x,m){return m.i=x.i,m.j=x.j,m.S=x.S.slice(),m}function N(x,m){var w=[],A=typeof x,S;if(m&&A=="object")for(S in x)try{w.push(N(x[S],m-1))}catch{}return w.length?w:A=="string"?x:x+"\0"}function I(x,m){for(var w=x+"",A,S=0;S<w.length;)m[i&S]=i&(A^=m[i&S]*19)+w.charCodeAt(S++);return D(m)}function R(){try{var x;return r&&(x=r.randomBytes)?x=x(g):(x=new Uint8Array(g),(u.crypto||u.msCrypto).getRandomValues(x)),D(x)}catch{var m=u.navigator,w=m&&m.plugins;return[+new Date,u,w,u.screen,D(l)]}}function D(x){return String.fromCharCode.apply(0,x)}if(I(h.random(),l),e.exports){e.exports=c;try{r=Wn}catch{}}else h["seed"+s]=c})(typeof self<"u"?self:C,[],Math)})(un);var Bn=un.exports,Yn=Gn,Un=Cn,Vn=Tn,Fn=bn,jn=Ln,Qn=Hn,T=Bn;T.alea=Yn;T.xor128=Un;T.xorwow=Vn;T.xorshift7=Fn;T.xor4096=jn;T.tychei=Qn;function z(e,u,l){return Math.max(u,Math.min(l,e))}function kn(){n.canvas=document.getElementById("gameCanvas"),n.ctx=n.canvas.getContext("2d"),Z(),window.addEventListener("resize",Z),n.canvas.addEventListener("pointerdown",u=>{u.preventDefault(),K()}),window.addEventListener("keydown",u=>{u.code==="Space"&&(u.preventDefault(),K())}),n.rng=Math.random;const e=document.getElementById("play-btn");if(e){const u=()=>{n.gameState==="start"&&(document.getElementById("start-screen").style.display="none",document.querySelector(".stats").style.display="flex",n.gameState="aiming")};e.addEventListener("pointerdown",l=>{l.preventDefault(),u()}),e.addEventListener("click",l=>{l.preventDefault(),u()})}}function K(){if(n.gameState!=="start")if(n.gameState==="aiming")n.gameState="power_select";else if(n.gameState==="power_select")qn();else if(n.gameState==="flying"&&!n.penguin.isDiving&&n.penguin.y<n.GROUND_Y-n.metrics.penguinRadius-5){n.penguin.isDiving=!0;const u=Math.sqrt(n.penguin.vx*n.penguin.vx+n.penguin.vy*n.penguin.vy)*En,l=In*Math.PI/180;n.penguin.vx=u*Math.cos(l),n.penguin.vy=u*Math.sin(l)}else if(n.gameState==="rolling"&&n.canJumpFromRoll){const e=Rn*Math.PI/180;n.penguin.vy=-J*Math.sin(e),n.penguin.vx+=J*Math.cos(e),n.gameState="flying",n.canJumpFromRoll=!1}else n.gameState==="finished"&&Jn()}function Z(){const e=document.querySelector(".container"),u=Math.max(1,(e==null?void 0:e.clientWidth)||window.innerWidth),l=Math.max(1,(e==null?void 0:e.clientHeight)||window.innerHeight),h=Math.min(window.devicePixelRatio||1,2);n.viewportWidth=u,n.viewportHeight=l,n.dpr=h,n.canvas.style.width=`${u}px`,n.canvas.style.height=`${l}px`,n.canvas.width=Math.round(u*h),n.canvas.height=Math.round(l*h),n.ctx.setTransform(h,0,0,h,0,0);const g=Math.min(u/F,l/fn);n.uiScale=z(g,.6,1.25);const p=Math.max(60*n.uiScale,u*.09);n.metrics={penguinRadius:H*n.uiScale,cannonX:p,cannonWidth:$*n.uiScale,cannonHeight:nn*n.uiScale,powerBarWidth:tn*n.uiScale,powerBarHeight:en*n.uiScale,springHeight:on*n.uiScale,springWidths:rn.map(t=>t*n.uiScale)};const d=z(u/F,.7,1.4);n.tuning.MIN_SPRING_DISTANCE=an*d,n.tuning.MAX_SPRING_DISTANCE=cn*d,n.tuning.SPRING_SPAWN_DISTANCE=sn*d,n.GROUND_Y=l*xn,n.CANNON_Y=n.GROUND_Y;const s=n.metrics.penguinRadius;n.gameState==="aiming"||n.gameState==="power_select"||n.gameState==="start"?(n.penguin.x=p+Math.cos(n.cannonAngle)*n.metrics.cannonWidth,n.penguin.y=n.CANNON_Y+Math.sin(n.cannonAngle)*n.metrics.cannonWidth):n.penguin.y=Math.min(n.penguin.y,n.GROUND_Y-s),n.springs.forEach(t=>{t.widthIndex===void 0&&(t.widthIndex=0),t.y=n.GROUND_Y-n.metrics.springHeight})}function qn(){const e=(q+n.powerValue/100*(An-q))*ln;n.penguin.vx=e*Math.cos(n.cannonAngle),n.penguin.vy=e*Math.sin(n.cannonAngle),n.gameState="flying",n.hasShot=!0,n.boomUntil=Date.now()+700,n.springs=[],n.lastSpringX=n.metrics.cannonX,n.maxDistance=0,n.canJumpFromRoll=!0}function Jn(){n.penguin.x=n.metrics.cannonX,n.penguin.y=n.CANNON_Y-n.metrics.penguinRadius,n.penguin.vx=0,n.penguin.vy=0,n.penguin.isDiving=!1,n.springs=[],n.cameraX=0,n.lastSpringX=0,n.maxDistance=0,n.gameState="aiming",n.canJumpFromRoll=!0,n.cannonAngle=-Math.PI/4,n.cannonRotationDirection=1,n.powerValue=50,n.powerDirection=1,n.hasShot=!1,n.boomUntil=0}function zn(){const e=n.metrics.springHeight,u=n.metrics.springWidths;for(;n.lastSpringX<n.penguin.x+n.tuning.SPRING_SPAWN_DISTANCE;){const l=n.tuning.MIN_SPRING_DISTANCE+n.rng()*(n.tuning.MAX_SPRING_DISTANCE-n.tuning.MIN_SPRING_DISTANCE),h=n.lastSpringX+l,g=n.GROUND_Y-e,p=Math.floor(n.rng()*u.length);n.springs.push({x:h,y:g,widthIndex:p,used:!1,animStart:0}),n.lastSpringX=h}n.springs=n.springs.filter(l=>l.x>n.cameraX-200)}function Kn(){for(const e of n.springs){if(e.used)continue;const u=n.metrics.springWidths[e.widthIndex??0],l=n.metrics.springHeight*.2,h=e.y,g=e.y+l,p=u*.3,d=e.x-p,s=e.x+u+p,t=n.metrics.penguinRadius,o=n.penguin.x-t,a=n.penguin.x+t,i=n.penguin.y-t,r=n.penguin.y+t;if(a>d&&o<s&&r>h&&i<g&&n.penguin.vy>=0){const c=Math.max(Math.sqrt(n.penguin.vx*n.penguin.vx+n.penguin.vy*n.penguin.vy),n.tuning.SPRING_BOOST),f=Math.PI/4;n.penguin.vx=c*Math.cos(f),n.penguin.vy=-c*Math.sin(f),e.used=!0,n.canJumpFromRoll=!0,n.penguin.isDiving=!1,e.animStart=Date.now()}}}function Zn(){if(n.gameState==="aiming"){n.cannonAngle+=mn*n.cannonRotationDirection,n.cannonAngle>=k?(n.cannonAngle=k,n.cannonRotationDirection=-1):n.cannonAngle<=Q&&(n.cannonAngle=Q,n.cannonRotationDirection=1),n.penguin.x=n.metrics.cannonX+Math.cos(n.cannonAngle)*n.metrics.cannonWidth,n.penguin.y=n.CANNON_Y+Math.sin(n.cannonAngle)*n.metrics.cannonWidth;return}if(n.gameState==="power_select"){n.powerValue+=vn*n.powerDirection,n.powerValue>=100?(n.powerValue=100,n.powerDirection=-1):n.powerValue<=0&&(n.powerValue=0,n.powerDirection=1);return}if(n.gameState==="rolling"){n.penguin.vx*=n.tuning.ROLLING_FRICTION,n.penguin.x+=n.penguin.vx,n.penguin.y=n.GROUND_Y-n.metrics.penguinRadius,Math.abs(n.penguin.vx)<n.tuning.ROLLING_THRESHOLD&&(n.gameState="finished");const l=Math.max(0,n.penguin.x-n.metrics.cannonX);n.maxDistance=Math.max(n.maxDistance,l),n.cameraX=Math.max(0,n.penguin.x-n.viewportWidth/3);return}if(n.gameState!=="flying")return;n.penguin.vy+=n.tuning.GRAVITY,n.penguin.x+=n.penguin.vx,n.penguin.y+=n.penguin.vy;const e=n.metrics.penguinRadius;n.penguin.y>=n.GROUND_Y-e&&(n.penguin.y=n.GROUND_Y-e,n.penguin.vy=-n.penguin.vy*n.tuning.BOUNCE_DAMPING,n.penguin.vx*=.95,n.penguin.isDiving=!1,.5*n.penguin.mass*(n.penguin.vx*n.penguin.vx+n.penguin.vy*n.penguin.vy)<n.tuning.MIN_ENERGY_THRESHOLD&&Math.abs(n.penguin.vy)<8&&(n.gameState="rolling",n.penguin.vy=0,n.penguin.vx*=n.tuning.ROLLING_SPEED_MULTIPLIER)),Kn(),zn();const u=Math.max(0,n.penguin.x-n.metrics.cannonX);n.maxDistance=Math.max(n.maxDistance,u),n.cameraX=Math.max(0,n.penguin.x-n.viewportWidth/3)}const $n="data:image/png;base64,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",X=new Image;X.src=$n;function nt(){const e=n.ctx,u=n.viewportWidth||n.canvas.width,l=n.viewportHeight||n.canvas.height,{penguinRadius:h,cannonX:g,cannonWidth:p,cannonHeight:d,powerBarWidth:s,powerBarHeight:t,springHeight:o,springWidths:a}=n.metrics,i=n.uiScale||1,r=3*i,c=v=>`${Math.max(12,v*i)}px Arial`;e.clearRect(0,0,u,l);const f=e.createLinearGradient(0,0,0,n.GROUND_Y);if(f.addColorStop(0,"#87CEEB"),f.addColorStop(1,"#E0F6FF"),e.fillStyle=f,e.fillRect(0,0,u,n.GROUND_Y),e.fillStyle="#8B7355",e.fillRect(0,n.GROUND_Y,u,l-n.GROUND_Y),e.save(),e.translate(-n.cameraX,0),e.strokeStyle="#654321",e.lineWidth=r,e.beginPath(),e.moveTo(0,n.GROUND_Y),e.lineTo(n.cameraX+u,n.GROUND_Y),e.stroke(),(n.gameState==="aiming"||n.gameState==="power_select"||n.gameState==="start")&&(e.save(),e.translate(g,n.CANNON_Y),e.rotate(n.cannonAngle),X.complete?e.drawImage(X,0,-d/2,p,d):(e.fillStyle="#000",e.fillRect(0,-d/2,p,d)),n.hasShot&&(e.strokeStyle="red",e.lineWidth=r,e.strokeRect(0,-d/2,p,d),Date.now()<n.boomUntil&&(e.font=c(28),e.fillText("ðŸ’¥",p+10*i,8*i))),e.restore()),n.springs.forEach(v=>{const N=Date.now(),I=v.animStart||0,R=Math.max(0,N-I),D=Dn,x=D+Mn,m=x+_n;let w=1;if(R>0&&R<=D){const y=R/D;w=1+(.8-1)*y}else if(R>D&&R<=x){const y=(R-D)/(x-D);w=.8+(1.2-.8)*y}else if(R>x&&R<=m){const y=(R-x)/(m-x);w=1.2+(1-1.2)*y}else w=1;const A=a[v.widthIndex??0],S=o*w,E=n.GROUND_Y-S;e.fillStyle=v.used?"#999":"#32CD32",e.fillRect(v.x,E,A,S),e.strokeStyle=v.used?"#666":"#228B22",e.lineWidth=Math.max(1,2*i);for(let y=0;y<5;y++){const _=E+y*S/5;e.beginPath(),e.moveTo(v.x,_),e.lineTo(v.x+A,_),e.stroke()}e.font=c(20);const M=v.x+A/2-10*i;e.fillText("ðŸŒ€",M,E+S/2+6*i)}),n.gameState==="rolling"&&(e.fillStyle="red",e.beginPath(),e.arc(n.penguin.x,n.penguin.y,h+5*i,0,Math.PI*2),e.fill()),e.fillStyle="#4169E1",e.beginPath(),e.arc(n.penguin.x,n.penguin.y,h,0,Math.PI*2),e.fill(),e.font=c(24),e.fillText("ðŸ§",n.penguin.x-12*i,n.penguin.y+8*i),e.restore(),n.gameState==="power_select"){const v=u/2-s/2,N=Math.max(20*i,l*.08);e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(v-10*i,N-10*i,s+20*i,t+40*i),e.fillStyle="white",e.font=c(20),e.textAlign="center",e.fillText("POWER",u/2,N-20*i),e.strokeStyle="white",e.lineWidth=Math.max(1,2*i),e.strokeRect(v,N,s,t);const I=n.powerValue/100*s;e.fillStyle="#4CAF50",e.fillRect(v,N,I,t),e.textAlign="left"}if(n.gameState==="aiming"&&(e.fillStyle="white",e.font=`bold ${Math.max(14,24*i)}px Arial`,e.textAlign="center",e.fillText("Tap/Click or Space to lock angle",u/2,Math.max(28*i,l*.12)),e.textAlign="left"),n.gameState==="finished"){e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(0,0,u,l);const v=Math.min(420*i,u*.85),N=Math.min(260*i,l*.6),I=u/2-v/2,R=l/2-N/2;e.fillStyle="white",e.fillRect(I,R,v,N),e.fillStyle="#333",e.font=`bold ${Math.max(18,36*i)}px Arial`,e.textAlign="center",e.fillText("Game Over!",u/2,R+60*i);const D=Math.max(0,Math.round(n.maxDistance/10));e.font=`bold ${Math.max(22,48*i)}px Arial`,e.fillStyle="#4CAF50",e.fillText(D+"m",u/2,R+120*i);const x=Math.min(220*i,v*.7),m=Math.max(40*i,N*.2),w=u/2-x/2,A=R+N-m-24*i;e.fillStyle="#4CAF50",e.fillRect(w,A,x,m),e.fillStyle="white",e.font=`bold ${Math.max(14,24*i)}px Arial`,e.fillText("Play Again",u/2,A+m*.65),e.textAlign="left"}tt()}function tt(){const e=Math.max(0,Math.round(n.maxDistance/10)),l=(Math.sqrt(n.penguin.vx*n.penguin.vx+n.penguin.vy*n.penguin.vy)/ln).toFixed(1),h=document.getElementById("distance"),g=document.getElementById("speed-display");h&&(h.textContent=String(e)),g&&(g.textContent=n.gameState==="flying"||n.gameState==="rolling"?String(l):"0")}function gn(){Zn(),nt(),requestAnimationFrame(gn)}window.addEventListener("load",()=>{kn(),requestAnimationFrame(gn)});
