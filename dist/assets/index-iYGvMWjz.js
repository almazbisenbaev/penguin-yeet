(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))u(p);new MutationObserver(p=>{for(const h of p)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function s(p){const h={};return p.integrity&&(h.integrity=p.integrity),p.referrerPolicy&&(h.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?h.credentials="include":p.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(p){if(p.ep)return;p.ep=!0;const h=s(p);fetch(p.href,h)}})();const rn=1200,En=800,Mn=.12,_n=.85,On=.6,Gn=.5,j=28.6,an=100,fn=60,hn=30,Cn=.02,on=-Math.PI/2,sn=0,xn=200,dn=30,Pn=2,cn=10,bn=100,mn=[50,100],vn=60,Sn=300,An=1200,wn=1e3,Ln=5,Tn=1.2,Hn=30,yn=.35,Xn=.992,Fn=2.5,Wn=.2,ln=8,Bn=60,Yn=65,Un=150,Vn=180,jn=220,n={canvas:null,ctx:null,viewportWidth:0,viewportHeight:0,dpr:1,uiScale:1,metrics:{penguinRadius:j,cannonX:an,cannonWidth:fn,cannonHeight:hn,powerBarWidth:xn,powerBarHeight:dn,springHeight:vn,springWidths:[...mn]},gameState:"start",penguin:{x:an,y:400-j,vx:0,vy:0,mass:1,isDiving:!1},springs:[],cameraX:0,lastSpringX:0,maxDistance:0,GROUND_Y:400,canJumpFromRoll:!0,cannonAngle:-Math.PI/4,cannonRotationDirection:1,powerValue:50,powerDirection:1,CANNON_Y:400,rng:Math.random,hasShot:!1,boomUntil:0,lastJumpAt:0,tuning:{GRAVITY:Mn,BOUNCE_DAMPING:On,MIN_ENERGY_THRESHOLD:Gn,ROLLING_FRICTION:Xn,ROLLING_SPEED_MULTIPLIER:Fn,ROLLING_THRESHOLD:Wn,SPRING_BOOST:Ln,MIN_SPRING_DISTANCE:Sn,MAX_SPRING_DISTANCE:An,SPRING_SPAWN_DISTANCE:wn,SPRING_SPEED_MULTIPLIER:Tn,SPRING_SPEED_CAP:Hn}};var X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kn(t){if(t.__esModule)return t;var g=t.default;if(typeof g=="function"){var s=function u(){return this instanceof u?Reflect.construct(g,arguments,this.constructor):g.apply(this,arguments)};s.prototype=g.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(u){var p=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(s,u,p.get?p:{enumerable:!0,get:function(){return t[u]}})}),s}var q={exports:{}};q.exports;(function(t){(function(g,s,u){function p(e){var r=this,o=c();r.next=function(){var i=2091639*r.s0+r.c*23283064365386963e-26;return r.s0=r.s1,r.s1=r.s2,r.s2=i-(r.c=i|0)},r.c=1,r.s0=o(" "),r.s1=o(" "),r.s2=o(" "),r.s0-=o(e),r.s0<0&&(r.s0+=1),r.s1-=o(e),r.s1<0&&(r.s1+=1),r.s2-=o(e),r.s2<0&&(r.s2+=1),o=null}function h(e,r){return r.c=e.c,r.s0=e.s0,r.s1=e.s1,r.s2=e.s2,r}function d(e,r){var o=new p(e),i=r&&r.state,a=o.next;return a.int32=function(){return o.next()*4294967296|0},a.double=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.quick=a,i&&(typeof i=="object"&&h(i,o),a.state=function(){return h(o,{})}),a}function c(){var e=4022871197,r=function(o){o=String(o);for(var i=0;i<o.length;i++){e+=o.charCodeAt(i);var a=.02519603282416938*e;e=a>>>0,a-=e,a*=e,e=a>>>0,a-=e,e+=a*4294967296}return(e>>>0)*23283064365386963e-26};return r}s&&s.exports?s.exports=d:this.alea=d})(X,t)})(q);var Jn=q.exports,z={exports:{}};z.exports;(function(t){(function(g,s,u){function p(c){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var i=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^i^i>>>8},c===(c|0)?e.x=c:r+=c;for(var o=0;o<r.length+64;o++)e.x^=r.charCodeAt(o)|0,e.next()}function h(c,e){return e.x=c.x,e.y=c.y,e.z=c.z,e.w=c.w,e}function d(c,e){var r=new p(c),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do var a=r.next()>>>11,l=(r.next()>>>0)/4294967296,f=(a+l)/(1<<21);while(f===0);return f},i.int32=r.next,i.quick=i,o&&(typeof o=="object"&&h(o,r),i.state=function(){return h(r,{})}),i}s&&s.exports?s.exports=d:this.xor128=d})(X,t)})(z);var Qn=z.exports,K={exports:{}};K.exports;(function(t){(function(g,s,u){function p(c){var e=this,r="";e.next=function(){var i=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^(i^i<<1))|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,c===(c|0)?e.x=c:r+=c;for(var o=0;o<r.length+64;o++)e.x^=r.charCodeAt(o)|0,o==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function h(c,e){return e.x=c.x,e.y=c.y,e.z=c.z,e.w=c.w,e.v=c.v,e.d=c.d,e}function d(c,e){var r=new p(c),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do var a=r.next()>>>11,l=(r.next()>>>0)/4294967296,f=(a+l)/(1<<21);while(f===0);return f},i.int32=r.next,i.quick=i,o&&(typeof o=="object"&&h(o,r),i.state=function(){return h(r,{})}),i}s&&s.exports?s.exports=d:this.xorwow=d})(X,t)})(K);var qn=K.exports,Z={exports:{}};Z.exports;(function(t){(function(g,s,u){function p(c){var e=this;e.next=function(){var o=e.x,i=e.i,a,l;return a=o[i],a^=a>>>7,l=a^a<<24,a=o[i+1&7],l^=a^a>>>10,a=o[i+3&7],l^=a^a>>>3,a=o[i+4&7],l^=a^a<<7,a=o[i+7&7],a=a^a<<13,l^=a^a<<9,o[i]=l,e.i=i+1&7,l};function r(o,i){var a,l=[];if(i===(i|0))l[0]=i;else for(i=""+i,a=0;a<i.length;++a)l[a&7]=l[a&7]<<15^i.charCodeAt(a)+l[a+1&7]<<13;for(;l.length<8;)l.push(0);for(a=0;a<8&&l[a]===0;++a);for(a==8?l[7]=-1:l[a],o.x=l,o.i=0,a=256;a>0;--a)o.next()}r(e,c)}function h(c,e){return e.x=c.x.slice(),e.i=c.i,e}function d(c,e){c==null&&(c=+new Date);var r=new p(c),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do var a=r.next()>>>11,l=(r.next()>>>0)/4294967296,f=(a+l)/(1<<21);while(f===0);return f},i.int32=r.next,i.quick=i,o&&(o.x&&h(o,r),i.state=function(){return h(r,{})}),i}s&&s.exports?s.exports=d:this.xorshift7=d})(X,t)})(Z);var zn=Z.exports,$={exports:{}};$.exports;(function(t){(function(g,s,u){function p(c){var e=this;e.next=function(){var o=e.w,i=e.X,a=e.i,l,f;return e.w=o=o+1640531527|0,f=i[a+34&127],l=i[a=a+1&127],f^=f<<13,l^=l<<17,f^=f>>>15,l^=l>>>12,f=i[a]=f^l,e.i=a,f+(o^o>>>16)|0};function r(o,i){var a,l,f,A,E,N=[],L=128;for(i===(i|0)?(l=i,i=null):(i=i+"\0",l=0,L=Math.max(L,i.length)),f=0,A=-32;A<L;++A)i&&(l^=i.charCodeAt((A+32)%i.length)),A===0&&(E=l),l^=l<<10,l^=l>>>15,l^=l<<4,l^=l>>>13,A>=0&&(E=E+1640531527|0,a=N[A&127]^=l+E,f=a==0?f+1:0);for(f>=128&&(N[(i&&i.length||0)&127]=-1),f=127,A=4*128;A>0;--A)l=N[f+34&127],a=N[f=f+1&127],l^=l<<13,a^=a<<17,l^=l>>>15,a^=a>>>12,N[f]=l^a;o.w=E,o.X=N,o.i=f}r(e,c)}function h(c,e){return e.i=c.i,e.w=c.w,e.X=c.X.slice(),e}function d(c,e){c==null&&(c=+new Date);var r=new p(c),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do var a=r.next()>>>11,l=(r.next()>>>0)/4294967296,f=(a+l)/(1<<21);while(f===0);return f},i.int32=r.next,i.quick=i,o&&(o.X&&h(o,r),i.state=function(){return h(r,{})}),i}s&&s.exports?s.exports=d:this.xor4096=d})(X,t)})($);var Kn=$.exports,nn={exports:{}};nn.exports;(function(t){(function(g,s,u){function p(c){var e=this,r="";e.next=function(){var i=e.b,a=e.c,l=e.d,f=e.a;return i=i<<25^i>>>7^a,a=a-l|0,l=l<<24^l>>>8^f,f=f-i|0,e.b=i=i<<20^i>>>12^a,e.c=a=a-l|0,e.d=l<<16^a>>>16^f,e.a=f-i|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,c===Math.floor(c)?(e.a=c/4294967296|0,e.b=c|0):r+=c;for(var o=0;o<r.length+20;o++)e.b^=r.charCodeAt(o)|0,e.next()}function h(c,e){return e.a=c.a,e.b=c.b,e.c=c.c,e.d=c.d,e}function d(c,e){var r=new p(c),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do var a=r.next()>>>11,l=(r.next()>>>0)/4294967296,f=(a+l)/(1<<21);while(f===0);return f},i.int32=r.next,i.quick=i,o&&(typeof o=="object"&&h(o,r),i.state=function(){return h(r,{})}),i}s&&s.exports?s.exports=d:this.tychei=d})(X,t)})(nn);var Zn=nn.exports,In={exports:{}};const $n={},ne=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"})),ee=kn(ne);(function(t){(function(g,s,u){var p=256,h=6,d=52,c="random",e=u.pow(p,h),r=u.pow(2,d),o=r*2,i=p-1,a;function l(x,m,D){var w=[];m=m==!0?{entropy:!0}:m||{};var y=N(E(m.entropy?[x,_(s)]:x??L(),3),w),M=new f(w),O=function(){for(var v=M.g(h),R=e,I=0;v<r;)v=(v+I)*p,R*=p,I=M.g(1);for(;v>=o;)v/=2,R/=2,I>>>=1;return(v+I)/R};return O.int32=function(){return M.g(4)|0},O.quick=function(){return M.g(4)/4294967296},O.double=O,N(_(M.S),s),(m.pass||D||function(v,R,I,G){return G&&(G.S&&A(G,M),v.state=function(){return A(M,{})}),I?(u[c]=v,R):v})(O,y,"global"in m?m.global:this==u,m.state)}function f(x){var m,D=x.length,w=this,y=0,M=w.i=w.j=0,O=w.S=[];for(D||(x=[D++]);y<p;)O[y]=y++;for(y=0;y<p;y++)O[y]=O[M=i&M+x[y%D]+(m=O[y])],O[M]=m;(w.g=function(v){for(var R,I=0,G=w.i,H=w.j,S=w.S;v--;)R=S[G=i&G+1],I=I*p+S[i&(S[G]=S[H=i&H+R])+(S[H]=R)];return w.i=G,w.j=H,I})(p)}function A(x,m){return m.i=x.i,m.j=x.j,m.S=x.S.slice(),m}function E(x,m){var D=[],w=typeof x,y;if(m&&w=="object")for(y in x)try{D.push(E(x[y],m-1))}catch{}return D.length?D:w=="string"?x:x+"\0"}function N(x,m){for(var D=x+"",w,y=0;y<D.length;)m[i&y]=i&(w^=m[i&y]*19)+D.charCodeAt(y++);return _(m)}function L(){try{var x;return a&&(x=a.randomBytes)?x=x(p):(x=new Uint8Array(p),(g.crypto||g.msCrypto).getRandomValues(x)),_(x)}catch{var m=g.navigator,D=m&&m.plugins;return[+new Date,g,D,g.screen,_(s)]}}function _(x){return String.fromCharCode.apply(0,x)}if(N(u.random(),s),t.exports){t.exports=l;try{a=ee}catch{}}else u["seed"+c]=l})(typeof self<"u"?self:X,[],Math)})(In);var te=In.exports,ie=Jn,re=Qn,ae=qn,oe=zn,se=Kn,ce=Zn,W=te;W.alea=ie;W.xor128=re;W.xorwow=ae;W.xorshift7=oe;W.xor4096=se;W.tychei=ce;function un(t,g,s){return Math.max(g,Math.min(s,t))}function le(){n.canvas=document.getElementById("gameCanvas"),n.ctx=n.canvas.getContext("2d"),pn(),window.addEventListener("resize",pn),n.canvas.addEventListener("pointerdown",s=>{s.preventDefault(),gn()}),window.addEventListener("keydown",s=>{s.code==="Space"&&(s.preventDefault(),gn())}),n.rng=Math.random;const t=document.getElementById("play-btn");if(t){const s=()=>{n.gameState==="start"&&(document.getElementById("start-screen").style.display="none",document.querySelector(".stats").style.display="flex",n.gameState="aiming")};t.addEventListener("pointerdown",u=>{u.preventDefault(),s()}),t.addEventListener("click",u=>{u.preventDefault(),s()})}const g=document.getElementById("restart-btn");if(g){const s=()=>{Nn();const u=document.getElementById("finish-screen");u&&(u.style.display="none")};g.addEventListener("pointerdown",u=>{u.preventDefault(),s()}),g.addEventListener("click",u=>{u.preventDefault(),s()})}}function gn(){if(n.gameState!=="start")if(n.gameState==="aiming")n.gameState="power_select";else if(n.gameState==="power_select")ue();else if(n.gameState==="flying"&&!n.penguin.isDiving&&n.penguin.y<n.GROUND_Y-n.metrics.penguinRadius){n.penguin.isDiving=!0;const t=Math.sqrt(n.penguin.vx*n.penguin.vx+n.penguin.vy*n.penguin.vy),g=Yn*Math.PI/180,s=n.penguin.vx>=0?1:-1,u=Math.max(.001,t);n.penguin.vx=s*u*Math.cos(g),n.penguin.vy=u*Math.sin(g)}else if(n.gameState==="rolling"&&n.canJumpFromRoll){const t=Bn*Math.PI/180;n.penguin.vy=-ln*Math.sin(t),n.penguin.vx+=ln*Math.cos(t),n.gameState="flying",n.canJumpFromRoll=!1,n.lastJumpAt=Date.now()}else n.gameState==="finished"&&Nn()}function pn(){const t=document.querySelector(".container"),g=Math.max(1,(t==null?void 0:t.clientWidth)||window.innerWidth),s=Math.max(1,(t==null?void 0:t.clientHeight)||window.innerHeight),u=Math.min(window.devicePixelRatio||1,2);n.viewportWidth=g,n.viewportHeight=s,n.dpr=u,n.canvas.style.width=`${g}px`,n.canvas.style.height=`${s}px`,n.canvas.width=Math.round(g*u),n.canvas.height=Math.round(s*u),n.ctx.setTransform(u,0,0,u,0,0);const p=Math.min(g/rn,s/En),h=1.4;n.uiScale=un(p*h,.85,1.8);const d=Math.max(60*n.uiScale,g*.09);n.metrics={penguinRadius:j*n.uiScale,cannonX:d,cannonWidth:fn*n.uiScale,cannonHeight:hn*n.uiScale,powerBarWidth:xn*n.uiScale,powerBarHeight:dn*n.uiScale,springHeight:vn*n.uiScale,springWidths:mn.map(r=>r*n.uiScale)};const c=un(g/rn,.7,1.4);n.tuning.MIN_SPRING_DISTANCE=Sn*c,n.tuning.MAX_SPRING_DISTANCE=An*c,n.tuning.SPRING_SPAWN_DISTANCE=wn*c,n.GROUND_Y=s*_n,n.CANNON_Y=n.GROUND_Y;const e=n.metrics.penguinRadius;n.gameState==="aiming"||n.gameState==="power_select"||n.gameState==="start"?(n.penguin.x=d+Math.cos(n.cannonAngle)*n.metrics.cannonWidth,n.penguin.y=n.CANNON_Y+Math.sin(n.cannonAngle)*n.metrics.cannonWidth):n.penguin.y=Math.min(n.penguin.y,n.GROUND_Y-e),n.springs.forEach(r=>{r.widthIndex===void 0&&(r.widthIndex=0),r.y=n.GROUND_Y-n.metrics.springHeight})}function ue(){const t=(cn+n.powerValue/100*(bn-cn))*yn;n.penguin.vx=t*Math.cos(n.cannonAngle),n.penguin.vy=t*Math.sin(n.cannonAngle),n.gameState="flying",n.hasShot=!0,n.boomUntil=Date.now()+700,n.springs=[],n.lastSpringX=n.metrics.cannonX,n.maxDistance=0,n.canJumpFromRoll=!0}function Nn(){n.penguin.x=n.metrics.cannonX,n.penguin.y=n.CANNON_Y-n.metrics.penguinRadius,n.penguin.vx=0,n.penguin.vy=0,n.penguin.isDiving=!1,n.springs=[],n.cameraX=0,n.lastSpringX=0,n.maxDistance=0,n.gameState="aiming",n.canJumpFromRoll=!0,n.cannonAngle=-Math.PI/4,n.cannonRotationDirection=1,n.powerValue=50,n.powerDirection=1,n.hasShot=!1,n.boomUntil=0}function ge(){const t=n.metrics.springHeight,g=n.metrics.springWidths;for(;n.lastSpringX<n.penguin.x+n.tuning.SPRING_SPAWN_DISTANCE;){const s=n.tuning.MIN_SPRING_DISTANCE+n.rng()*(n.tuning.MAX_SPRING_DISTANCE-n.tuning.MIN_SPRING_DISTANCE),u=n.lastSpringX+s,p=n.GROUND_Y-t,h=Math.floor(n.rng()*g.length);n.springs.push({x:u,y:p,widthIndex:h,used:!1,animStart:0}),n.lastSpringX=u}n.springs=n.springs.filter(s=>s.x>n.cameraX-200)}function pe(){for(const t of n.springs){if(t.used)continue;const g=n.metrics.springWidths[t.widthIndex??0],s=n.metrics.springHeight*.2,u=t.y+n.metrics.springHeight*.15,p=u+s,h=g*.3,d=t.x-h,c=t.x+g+h,e=n.metrics.penguinRadius,r=n.penguin.x-e,o=n.penguin.x+e,i=n.penguin.y-e,a=n.penguin.y+e;if(o>d&&r<c&&a>u&&i<p&&n.penguin.vy>=0){const f=Math.sqrt(n.penguin.vx*n.penguin.vx+n.penguin.vy*n.penguin.vy)*n.tuning.SPRING_SPEED_MULTIPLIER,A=Math.min(f,n.tuning.SPRING_SPEED_CAP),E=Math.PI/4,N=Math.atan2(Math.abs(n.penguin.vy),Math.abs(n.penguin.vx)),_=N+(E-N)*.35,x=n.penguin.vx>=0?1:-1;n.penguin.vx=x*A*Math.cos(_),n.penguin.vy=-A*Math.sin(_),t.used=!0,n.canJumpFromRoll=!0,n.penguin.isDiving=!1,t.animStart=Date.now()}}}function fe(){if(n.gameState==="aiming"){n.cannonAngle+=Cn*n.cannonRotationDirection,n.cannonAngle>=sn?(n.cannonAngle=sn,n.cannonRotationDirection=-1):n.cannonAngle<=on&&(n.cannonAngle=on,n.cannonRotationDirection=1),n.penguin.x=n.metrics.cannonX+Math.cos(n.cannonAngle)*n.metrics.cannonWidth,n.penguin.y=n.CANNON_Y+Math.sin(n.cannonAngle)*n.metrics.cannonWidth;return}if(n.gameState==="power_select"){n.powerValue+=Pn*n.powerDirection,n.powerValue>=100?(n.powerValue=100,n.powerDirection=-1):n.powerValue<=0&&(n.powerValue=0,n.powerDirection=1);return}if(n.gameState==="rolling"){n.penguin.vx*=n.tuning.ROLLING_FRICTION,n.penguin.x+=n.penguin.vx,n.penguin.y=n.GROUND_Y-n.metrics.penguinRadius,Math.abs(n.penguin.vx)<n.tuning.ROLLING_THRESHOLD&&(n.gameState="finished");const s=Math.max(0,n.penguin.x-n.metrics.cannonX);n.maxDistance=Math.max(n.maxDistance,s),n.cameraX=Math.max(0,n.penguin.x-n.viewportWidth/3);return}if(n.gameState!=="flying")return;n.penguin.vy+=n.tuning.GRAVITY,n.penguin.x+=n.penguin.vx,n.penguin.y+=n.penguin.vy;const t=n.metrics.penguinRadius;if(n.penguin.y>=n.GROUND_Y-t){if(n.penguin.y=n.GROUND_Y-t,n.penguin.isDiving){n.gameState="finished",n.penguin.vx=0,n.penguin.vy=0;return}n.penguin.vy=-n.penguin.vy*n.tuning.BOUNCE_DAMPING,n.penguin.vx*=.95,n.penguin.isDiving=!1,.5*n.penguin.mass*(n.penguin.vx*n.penguin.vx+n.penguin.vy*n.penguin.vy)<n.tuning.MIN_ENERGY_THRESHOLD&&Math.abs(n.penguin.vy)<8&&(n.canJumpFromRoll?(n.gameState="rolling",n.penguin.vy=0,n.penguin.vx*=n.tuning.ROLLING_SPEED_MULTIPLIER):(n.gameState="finished",n.penguin.vx=0,n.penguin.vy=0))}pe(),ge();const g=Math.max(0,n.penguin.x-n.metrics.cannonX);n.maxDistance=Math.max(n.maxDistance,g),n.cameraX=Math.max(0,n.penguin.x-n.viewportWidth/3)}const he="data:image/png;base64,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",xe="/assets/penguin-fly-DRbyj-AX.png",de="/assets/penguin-dive-DYTuNqYG.png",me="/assets/ball-D3qM6NVY.png",k=new Image;k.src=he;const Rn=new Image;Rn.src=xe;const J=new Image;J.src=me;const Q=new Image;Q.src=de;function ve(){const t=n.ctx,g=n.viewportWidth||n.canvas.width,s=n.viewportHeight||n.canvas.height,{penguinRadius:u,cannonX:p,cannonWidth:h,cannonHeight:d,powerBarWidth:c,powerBarHeight:e,springHeight:r,springWidths:o}=n.metrics,i=n.uiScale||1,a=3*i,l=S=>`${Math.max(12,S*i)}px Arial`;t.clearRect(0,0,g,s);const f=t.createLinearGradient(0,0,0,n.GROUND_Y);f.addColorStop(0,"#87CEEB"),f.addColorStop(1,"#E0F6FF"),t.fillStyle=f,t.fillRect(0,0,g,n.GROUND_Y);const A=t.createLinearGradient(0,n.GROUND_Y,0,s);A.addColorStop(0,"#FFFFFF"),A.addColorStop(.5,"#EAF6FF"),A.addColorStop(1,"#D6ECFF"),t.fillStyle=A,t.fillRect(0,n.GROUND_Y,g,s-n.GROUND_Y),t.save(),t.translate(-n.cameraX,0),t.strokeStyle="#A3C9FF",t.lineWidth=a,t.beginPath(),t.moveTo(0,n.GROUND_Y),t.lineTo(n.cameraX+g,n.GROUND_Y),t.stroke(),(n.gameState==="aiming"||n.gameState==="power_select"||n.gameState==="start")&&(t.save(),t.translate(p,n.CANNON_Y),t.rotate(n.cannonAngle),k.complete?t.drawImage(k,0,-d/2,h,d):(t.fillStyle="#000",t.fillRect(0,-d/2,h,d)),n.hasShot&&(t.strokeStyle="red",t.lineWidth=a,t.strokeRect(0,-d/2,h,d),Date.now()<n.boomUntil&&(t.font=l(28),t.fillText("ðŸ’¥",h+10*i,8*i))),t.restore()),n.springs.forEach(S=>{const b=Date.now(),F=S.animStart||0,C=Math.max(0,b-F),P=Un,T=P+Vn,B=T+jn;let Y=1;if(C>0&&C<=P){const U=C/P;Y=1+(.8-1)*U}else if(C>P&&C<=T){const U=(C-P)/(T-P);Y=.8+(1.2-.8)*U}else if(C>T&&C<=B){const U=(C-T)/(B-T);Y=1.2+(1-1.2)*U}else Y=1;const en=o[S.widthIndex??0],V=r*Y,tn=n.GROUND_Y-V;t.save(),S.used&&(t.globalAlpha=.6),J.complete?t.drawImage(J,S.x,tn,en,V):(t.fillStyle="#32CD32",t.fillRect(S.x,tn,en,V)),t.restore()}),n.gameState==="rolling"&&(t.fillStyle="red",t.beginPath(),t.arc(n.penguin.x,n.penguin.y,u+5*i,0,Math.PI*2),t.fill());const E=Math.hypot(n.penguin.vx,n.penguin.vy),N=E>.5,L=3,_=n.penguin.isDiving&&N?n.penguin.x+n.penguin.vx*(L-1):n.penguin.x,x=n.penguin.isDiving&&N?n.penguin.y+n.penguin.vy*(L-1):n.penguin.y;if(n.penguin.isDiving&&N){const S=n.penguin.vx/E,b=n.penguin.vy/E,F=Math.min(140*i,50*i+E*3.2),C=10*i;t.save(),t.strokeStyle="rgba(255, 255, 255, 0.8)",t.lineWidth=Math.max(1.5,3*i);for(let P=-2;P<=2;P++){const T=_-b*C*P,B=x+S*C*P;t.beginPath(),t.moveTo(T-S*8*i,B-b*8*i),t.lineTo(T-S*F,B-b*F),t.stroke()}t.beginPath(),t.strokeStyle="rgba(135, 206, 235, 0.6)",t.lineWidth=Math.max(1,2*i),t.arc(_,x,u+10*i,0,Math.PI*2),t.stroke(),t.restore()}let m=0;n.gameState==="aiming"||n.gameState==="power_select"||n.gameState==="start"?m=n.cannonAngle:N?m=Math.atan2(n.penguin.vy,n.penguin.vx):m=n.penguin.vx>=0?0:Math.PI,t.save(),t.translate(_,x),t.rotate(m);const D=u*2.6,w=u*2.2,M=n.penguin.isDiving&&Q.complete?Q:Rn;M.complete?t.drawImage(M,-D/2,-w/2,D,w):(t.fillStyle="#4169E1",t.beginPath(),t.arc(0,0,u,0,Math.PI*2),t.fill()),t.restore();const O=Date.now();let v="flying";n.gameState==="start"?v="initial":n.gameState==="aiming"?v="aiming":n.gameState==="power_select"?v="power":n.gameState==="rolling"?v="rolling":n.gameState==="finished"?v="finished":n.gameState==="flying"&&(n.penguin.isDiving?v="diving":O-(n.lastJumpAt||0)<400?v="jumping":n.penguin.vy>=0?v="falling":v="flying");let R="#00FF00",I=Math.max(2,3*i);if(v==="initial"?(R="#1E90FF",I=Math.max(2,3*i)):v==="aiming"?(R="#FFD700",I=Math.max(2,3*i)):v==="power"?(R="#00CED1",I=Math.max(2,3.5*i)):v==="falling"?(R="#FF8C00",I=Math.max(3,4*i)):v==="jumping"?(R="#FF00FF",I=Math.max(4,5*i)):v==="rolling"?(R="#FF0000",I=Math.max(3,4*i)):v==="finished"&&(R="#808080",I=Math.max(2,3*i)),v!=="flying"&&v!=="diving"&&(t.save(),t.strokeStyle=R,t.lineWidth=I,t.beginPath(),t.arc(_,x,u+8*i,0,Math.PI*2),t.stroke(),t.restore()),t.restore(),n.gameState==="power_select"){const S=g/2-c/2,b=Math.max(20*i,s*.08);t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(S-10*i,b-10*i,c+20*i,e+40*i),t.fillStyle="white",t.font=l(20),t.textAlign="center",t.fillText("POWER",g/2,b-20*i),t.strokeStyle="white",t.lineWidth=Math.max(1,2*i),t.strokeRect(S,b,c,e);const F=n.powerValue/100*c;t.fillStyle="#4CAF50",t.fillRect(S,b,F,e),t.textAlign="left"}n.gameState==="aiming"&&(t.fillStyle="white",t.font=`bold ${Math.max(14,24*i)}px Arial`,t.textAlign="center",t.fillText("Tap/Click or Space to lock angle",g/2,Math.max(28*i,s*.12)),t.textAlign="left");const G=document.getElementById("finish-screen"),H=document.getElementById("final-distance");if(G)if(n.gameState==="finished"){if(G.style.display="flex",H){const S=Math.max(0,Math.round(n.maxDistance/10));H.textContent=`${S}m`}}else G.style.display="none";Se()}function Se(){const t=Math.max(0,Math.round(n.maxDistance/10)),s=(Math.sqrt(n.penguin.vx*n.penguin.vx+n.penguin.vy*n.penguin.vy)/yn).toFixed(1),u=document.getElementById("distance"),p=document.getElementById("speed-display");u&&(u.textContent=String(t)),p&&(p.textContent=n.gameState==="flying"||n.gameState==="rolling"?String(s):"0")}function Dn(){fe(),ve(),requestAnimationFrame(Dn)}window.addEventListener("load",()=>{le(),requestAnimationFrame(Dn)});
